(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1954],{3067:function(e,s,n){"use strict";n.d(s,{Z:function(){return a}});var r=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8063:function(e,s,n){"use strict";n.d(s,{Z:function(){return a}});var r=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2741:function(e,s,n){"use strict";n.d(s,{Z:function(){return a}});var r=n(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},8844:function(e,s,n){Promise.resolve().then(n.bind(n,3026))},3026:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return C}});var r=n(7437),a=n(2265),i=n(4033),t=n(2420),l=n(6110),c=n(3023),o=n(1908),d=n(6672),u=n(5771),m=n(2206),b=n(3160),h=n(4045),x=n(5825),_=n(3067),p=n(4530),f=n(8063),g=n(2812),j=n(2741),y=n(6637),v=n(1541),N=n(1396),w=n.n(N),k=n(1424);function C(){let{user:e}=(0,h.tN)(),s=(0,i.useRouter)(),[n,N]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(!0),[I,S]=(0,a.useState)(null),[F,Y]=(0,a.useState)({business_name:"",business_description:"",business_address:"",phone_number:"",business_registration_number:"",tax_identification_number:"",bank_account_name:"",bank_account_number:"",bank_name:"",business_category:"",years_in_operation:"",website_url:""}),[A,R]=(0,a.useState)("");(0,a.useEffect)(()=>{let s=async()=>{if(e)try{Z(!0);let{data:s,error:n}=await (0,x.jy)(e.id);n&&"PGRST116"!==n.code&&console.error("Profile load error:",n),s&&(S(s),Y({business_name:s.business_name||"",business_description:s.business_description||"",business_address:s.business_address||"",phone_number:s.phone_number||"",business_registration_number:s.business_registration_number||"",tax_identification_number:s.tax_identification_number||"",bank_account_name:s.bank_account_name||"",bank_account_number:s.bank_account_number||"",bank_name:s.bank_name||"",business_category:s.business_category||"",years_in_operation:s.years_in_operation||"",website_url:s.website_url||""}))}catch(e){console.error("Load profile error:",e)}finally{Z(!1)}};s()},[e]);let B=e=>{Y(s=>({...s,[e.target.name]:e.target.value})),A&&R("")},T=()=>{for(let e of["business_name","business_description","business_address","phone_number"])if(!F[e].trim())return R("".concat(e.replace("_"," ")," is required")),!1;return!0},q=async n=>{if(n.preventDefault(),T()){N(!0),R("");try{let n;let r={user_id:e.id,...F,approved:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};if((n=I?await (0,x.N)(I.id,r):await (0,x.Km)(r)).error){R(n.error.message),k.Am.error("KYC submission failed",{description:n.error.message});return}k.Am.success("KYC submitted successfully!",{description:"Your profile is now under review. You will be notified once approved."}),s.push("/dashboard/vendor")}catch(e){R("An unexpected error occurred"),k.Am.error("KYC submission failed",{description:"An unexpected error occurred"})}finally{N(!1)}}};return C?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(b.T,{className:"h-8 w-8"})}):(0,r.jsx)(t.a,{requiredRole:"vendor",children:(0,r.jsxs)("div",{className:"container max-w-4xl py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(w(),{href:"/dashboard/vendor",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-4",children:[(0,r.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,r.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:[I?"Update":"Complete"," KYC Verification"]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:I?"Update your business information and documents":"Provide your business information to get verified and start accepting bookings"})]}),I&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)(m.bZ,{className:I.approved?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50",children:[I.approved?(0,r.jsx)(p.Z,{className:"h-4 w-4 text-green-600"}):(0,r.jsx)(f.Z,{className:"h-4 w-4 text-yellow-600"}),(0,r.jsx)(m.X,{className:I.approved?"text-green-800":"text-yellow-800",children:I.approved?"Your KYC has been approved. You can update your information anytime.":"Your KYC is currently under review. Updates will require re-approval."})]})}),(0,r.jsxs)("form",{onSubmit:q,className:"space-y-8",children:[A&&(0,r.jsx)(m.bZ,{variant:"destructive",children:(0,r.jsx)(m.X,{children:A})}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsxs)(l.ll,{className:"flex items-center",children:[(0,r.jsx)(g.Z,{className:"mr-2 h-5 w-5"}),"Business Information"]}),(0,r.jsx)(l.SZ,{children:"Tell us about your business"})]}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"business_name",children:"Business Name *"}),(0,r.jsx)(o.I,{id:"business_name",name:"business_name",placeholder:"Enter your business name",value:F.business_name,onChange:B,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"business_category",children:"Business Category"}),(0,r.jsx)(o.I,{id:"business_category",name:"business_category",placeholder:"e.g., Hotel, Restaurant, Security",value:F.business_category,onChange:B})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"business_description",children:"Business Description *"}),(0,r.jsx)(u.g,{id:"business_description",name:"business_description",placeholder:"Describe your business and services",value:F.business_description,onChange:B,rows:4,required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"years_in_operation",children:"Years in Operation"}),(0,r.jsx)(o.I,{id:"years_in_operation",name:"years_in_operation",type:"number",placeholder:"e.g., 5",value:F.years_in_operation,onChange:B})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"website_url",children:"Website URL"}),(0,r.jsx)(o.I,{id:"website_url",name:"website_url",type:"url",placeholder:"https://your-website.com",value:F.website_url,onChange:B})]})]})]})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsxs)(l.ll,{className:"flex items-center",children:[(0,r.jsx)(j.Z,{className:"mr-2 h-5 w-5"}),"Contact Information"]}),(0,r.jsx)(l.SZ,{children:"How customers can reach you"})]}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"business_address",children:"Business Address *"}),(0,r.jsx)(u.g,{id:"business_address",name:"business_address",placeholder:"Enter your complete business address",value:F.business_address,onChange:B,rows:3,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"phone_number",children:"Phone Number *"}),(0,r.jsx)(o.I,{id:"phone_number",name:"phone_number",type:"tel",placeholder:"+234 xxx xxx xxxx",value:F.phone_number,onChange:B,required:!0})]})]})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsxs)(l.ll,{className:"flex items-center",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-5 w-5"}),"Legal Information"]}),(0,r.jsx)(l.SZ,{children:"Business registration and tax details"})]}),(0,r.jsx)(l.aY,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"business_registration_number",children:"Business Registration Number"}),(0,r.jsx)(o.I,{id:"business_registration_number",name:"business_registration_number",placeholder:"CAC Registration Number",value:F.business_registration_number,onChange:B})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"tax_identification_number",children:"Tax Identification Number"}),(0,r.jsx)(o.I,{id:"tax_identification_number",name:"tax_identification_number",placeholder:"TIN",value:F.tax_identification_number,onChange:B})]})]})})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsxs)(l.ll,{className:"flex items-center",children:[(0,r.jsx)(g.Z,{className:"mr-2 h-5 w-5"}),"Banking Information"]}),(0,r.jsx)(l.SZ,{children:"For payment processing"})]}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"bank_account_name",children:"Account Name"}),(0,r.jsx)(o.I,{id:"bank_account_name",name:"bank_account_name",placeholder:"Account holder name",value:F.bank_account_name,onChange:B})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"bank_account_number",children:"Account Number"}),(0,r.jsx)(o.I,{id:"bank_account_number",name:"bank_account_number",placeholder:"10-digit account number",value:F.bank_account_number,onChange:B})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"bank_name",children:"Bank Name"}),(0,r.jsx)(o.I,{id:"bank_name",name:"bank_name",placeholder:"e.g., First Bank, GTBank",value:F.bank_name,onChange:B})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)(c.z,{type:"button",variant:"outline",asChild:!0,children:(0,r.jsx)(w(),{href:"/dashboard/vendor",children:"Cancel"})}),(0,r.jsx)(c.z,{type:"submit",disabled:n,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.T,{className:"mr-2 h-4 w-4"}),I?"Updating...":"Submitting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),I?"Update KYC":"Submit for Review"]})})]})]})]})})}},2420:function(e,s,n){"use strict";n.d(s,{a:function(){return c}});var r=n(7437),a=n(2265),i=n(4033),t=n(4045),l=n(3160);function c(e){let{children:s,requiredRole:n=null}=e,{user:c,loading:o}=(0,t.tN)(),[d,u]=(0,a.useState)(!0),m=(0,i.useRouter)();return((0,a.useEffect)(()=>{let e=setTimeout(()=>{var e;if(!c){m.push("/login");return}if(n&&(null===(e=c.user_metadata)||void 0===e?void 0:e.role)!==n){m.push("/unauthorized");return}u(!1)},100);return()=>clearTimeout(e)},[c,m,n]),o||d)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(l.T,{className:"h-8 w-8"})}):c?(0,r.jsx)(r.Fragment,{children:s}):null}},1908:function(e,s,n){"use strict";n.d(s,{I:function(){return t}});var r=n(7437),a=n(2265),i=n(9311);let t=a.forwardRef((e,s)=>{let{className:n,type:a,...t}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:s,...t})});t.displayName="Input"},6672:function(e,s,n){"use strict";n.d(s,{_:function(){return o}});var r=n(7437),a=n(2265),i=n(6743),t=n(9213),l=n(9311);let c=(0,t.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,r.jsx)(i.f,{ref:s,className:(0,l.cn)(c(),n),...a})});o.displayName=i.f.displayName},5771:function(e,s,n){"use strict";n.d(s,{g:function(){return t}});var r=n(7437),a=n(2265),i=n(9311);let t=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:s,...a})});t.displayName="Textarea"},6743:function(e,s,n){"use strict";n.d(s,{f:function(){return l}});var r=n(2265),a=n(9381),i=n(7437),t=r.forwardRef((e,s)=>(0,i.jsx)(a.WV.label,{...e,ref:s,onMouseDown:s=>{let n=s.target;n.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));t.displayName="Label";var l=t}},function(e){e.O(0,[7533,4724,9561,8542,2032,1181,2971,7864,1744],function(){return e(e.s=8844)}),_N_E=e.O()}]);