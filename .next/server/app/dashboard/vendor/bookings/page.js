(()=>{var e={};e.id=6072,e.ids=[6072],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},63937:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>m,routeModule:()=>h,tree:()=>o});var r=t(73137),l=t(54647),a=t(4183),i=t.n(a),n=t(71775),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=r.AppPageRouteModule,o=["",{children:["dashboard",{children:["vendor",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,46560)),"C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\dashboard\\vendor\\bookings\\page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,48818)),"C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],m=["C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\dashboard\\vendor\\bookings\\page.jsx"],x="/dashboard/vendor/bookings/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new d({definition:{kind:l.x.APP_PAGE,page:"/dashboard/vendor/bookings/page",pathname:"/dashboard/vendor/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},98634:(e,s,t)=>{Promise.resolve().then(t.bind(t,42066))},42066:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var r=t(60080),l=t(9885),a=t(99767),i=t(97052),n=t(68384),c=t(24796);t(81704);var d=t(84827),o=t(80850),m=t(95440),x=t(15441),u=t(96253),h=t(34706),j=t(43917),g=t(79803),f=t(517),p=t(93680),b=t(78260),N=t(14571),v=t(59490),w=t(11440),y=t.n(w),Z=t(49268),k=t(9941);function q(){let{user:e}=(0,o.tN)(),{bookings:s,setBookings:t}=(0,o.ML)(),[w,q]=(0,l.useState)(!0),[_,P]=(0,l.useState)(null);(0,l.useEffect)(()=>{let s=async()=>{if(e)try{q(!0);let{data:s,error:r}=await (0,m.aL)(e.id,"vendor");r?(console.error("Bookings error:",r),k.Am.error("Failed to load bookings")):t(s||[])}catch(e){console.error("Load bookings error:",e),k.Am.error("Failed to load bookings")}finally{q(!1)}};s()},[e,t]);let C=async(e,r)=>{P(e);try{let{data:l,error:a}=await (0,m.i1)(e,r);if(a){k.Am.error("Failed to update booking status");return}t(s.map(s=>s.id===e?{...s,status:r}:s)),k.Am.success(`Booking ${r}!`,{description:"The customer has been notified of the status change"})}catch(e){k.Am.error("Failed to update booking status")}finally{P(null)}},B=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},D=e=>{switch(e){case"pending":return r.jsx(x.Z,{className:"h-4 w-4"});case"confirmed":case"completed":return r.jsx(u.Z,{className:"h-4 w-4"});case"cancelled":return r.jsx(h.Z,{className:"h-4 w-4"});default:return r.jsx(j.Z,{className:"h-4 w-4"})}},z=e=>{switch(e.status){case"pending":return(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(n.z,{size:"sm",onClick:()=>C(e.id,"confirmed"),disabled:_===e.id,children:_===e.id?r.jsx(d.T,{className:"h-4 w-4"}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(u.Z,{className:"h-4 w-4 mr-1"}),"Confirm"]})}),(0,r.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>C(e.id,"cancelled"),disabled:_===e.id,children:[r.jsx(h.Z,{className:"h-4 w-4 mr-1"}),"Decline"]})]});case"confirmed":return r.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>C(e.id,"completed"),disabled:_===e.id,children:_===e.id?r.jsx(d.T,{className:"h-4 w-4"}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(u.Z,{className:"h-4 w-4 mr-1"}),"Mark Complete"]})});default:return null}};return w?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(d.T,{className:"h-8 w-8"})}):r.jsx(a.a,{requiredRole:"vendor",children:(0,r.jsxs)("div",{className:"container py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(y(),{href:"/dashboard/vendor",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-4",children:[r.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Booking Requests"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your incoming booking requests and confirmed bookings"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i.ll,{className:"text-sm font-medium",children:"Total Requests"}),r.jsx(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(i.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:s.length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i.ll,{className:"text-sm font-medium",children:"Pending"}),r.jsx(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(i.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:s.filter(e=>"pending"===e.status).length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i.ll,{className:"text-sm font-medium",children:"Confirmed"}),r.jsx(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(i.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:s.filter(e=>"confirmed"===e.status).length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(i.ll,{className:"text-sm font-medium",children:"Completed"}),r.jsx(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(i.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:s.filter(e=>"completed"===e.status).length})})]})]}),0===s.length?r.jsx(i.Zb,{children:(0,r.jsxs)(i.aY,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(f.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No booking requests yet"}),r.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Booking requests will appear here once customers start booking your services"}),r.jsx(n.z,{asChild:!0,children:r.jsx(y(),{href:"/dashboard/vendor/listings/create",children:"Create More Listings"})})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[s.filter(e=>"pending"===e.status).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(x.Z,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Pending Requests (",s.filter(e=>"pending"===e.status).length,")"]}),r.jsx("div",{className:"space-y-4",children:s.filter(e=>"pending"===e.status).map(e=>(0,r.jsxs)(i.Zb,{className:"border-yellow-200 bg-yellow-50/50",children:[r.jsx(i.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx(i.ll,{className:"text-lg",children:e.listings?.title}),r.jsx(i.SZ,{children:"Booking request from customer"})]}),(0,r.jsxs)(c.C,{className:B(e.status),children:[D(e.status),r.jsx("span",{className:"ml-1 capitalize",children:e.status})]})]})}),(0,r.jsxs)(i.aY,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(f.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:(0,Z.ZP)(new Date(e.booking_date),"PPP")})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:e.booking_time})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:[e.guests," guest",e.guests>1?"s":""]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:["â‚¦",e.total_amount?.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(N.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:e.contact_phone})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(v.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:e.contact_email})]})]}),e.special_requests&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h5",{className:"font-medium text-sm mb-1",children:"Special Requests:"}),r.jsx("p",{className:"text-sm text-muted-foreground bg-white p-3 rounded border",children:e.special_requests})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Requested"," ",(0,Z.ZP)(new Date(e.created_at),"PPp")]}),z(e)]})]})]},e.id))})]}),s.filter(e=>"confirmed"===e.status).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(u.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Confirmed Bookings (",s.filter(e=>"confirmed"===e.status).length,")"]}),r.jsx("div",{className:"space-y-4",children:s.filter(e=>"confirmed"===e.status).map(e=>(0,r.jsxs)(i.Zb,{className:"border-blue-200 bg-blue-50/50",children:[r.jsx(i.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx(i.ll,{className:"text-lg",children:e.listings?.title}),r.jsx(i.SZ,{children:"Confirmed booking - ready to serve"})]}),(0,r.jsxs)(c.C,{className:B(e.status),children:[D(e.status),r.jsx("span",{className:"ml-1 capitalize",children:e.status})]})]})}),(0,r.jsxs)(i.aY,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(f.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:(0,Z.ZP)(new Date(e.booking_date),"PPP")})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:e.booking_time})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:[e.guests," guest",e.guests>1?"s":""]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:["â‚¦",e.total_amount?.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(N.Z,{className:"h-3 w-3 mr-1"}),r.jsx("span",{children:e.contact_phone})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(v.Z,{className:"h-3 w-3 mr-1"}),r.jsx("span",{children:e.contact_email})]})]}),z(e)]})]})]},e.id))})]}),s.filter(e=>"completed"===e.status).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[r.jsx(u.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Completed Bookings (",s.filter(e=>"completed"===e.status).length,")"]}),r.jsx("div",{className:"space-y-4",children:s.filter(e=>"completed"===e.status).map(e=>(0,r.jsxs)(i.Zb,{className:"border-green-200 bg-green-50/50",children:[r.jsx(i.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx(i.ll,{className:"text-lg",children:e.listings?.title}),r.jsx(i.SZ,{children:"Service completed successfully"})]}),(0,r.jsxs)(c.C,{className:B(e.status),children:[D(e.status),r.jsx("span",{className:"ml-1 capitalize",children:e.status})]})]})}),r.jsx(i.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(f.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:(0,Z.ZP)(new Date(e.booking_date),"PPP")})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:e.booking_time})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:[e.guests," guest",e.guests>1?"s":""]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:["â‚¦",e.total_amount?.toLocaleString()]})]})]})})]},e.id))})]})]})]})})}},46560:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>c});var r=t(17536);let l=(0,r.createProxy)(String.raw`C:\Users\D\Downloads\Bookhushly.com-main\Bookhushly.com-main\app\dashboard\vendor\bookings\page.jsx`),{__esModule:a,$$typeof:i}=l,n=l.default,c=n}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4650,977,1823,7981,5964,1704,3692,9767],()=>t(63937));module.exports=r})();