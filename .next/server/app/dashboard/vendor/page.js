(()=>{var e={};e.id=8242,e.ids=[8242],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},40139:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>x,routeModule:()=>u,tree:()=>c});var r=t(73137),i=t(54647),a=t(4183),l=t.n(a),n=t(71775),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=r.AppPageRouteModule,c=["",{children:["dashboard",{children:["vendor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,98047)),"C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\dashboard\\vendor\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,48818)),"C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],x=["C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\dashboard\\vendor\\page.jsx"],m="/dashboard/vendor/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new o({definition:{kind:i.x.APP_PAGE,page:"/dashboard/vendor/page",pathname:"/dashboard/vendor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8744:(e,s,t)=>{Promise.resolve().then(t.bind(t,66912))},66912:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var r=t(60080),i=t(9885),a=t(80850),l=t(46757),n=t(97052),d=t(10999),o=t(81704),c=t(9941),x=t(15441),m=t(96253),h=t(93804),u=t(517),j=t(66908),p=t(91672),f=t(22385),g=t(39546),v=t(26571),b=t(6315),N=t(84827),y=t(11440),w=t.n(y),k=t(99767),C=t(68384),Z=t(95440);function q(){let{user:e}=(0,a.tN)(),{listings:s,setListings:t}=(0,a.Ae)(),[y,q]=(0,i.useState)(null),[_,Y]=(0,i.useState)(!0),[P,A]=(0,i.useState)({totalListings:0,activeBookings:0,totalRevenue:0,pendingRequests:0}),[S,B]=(0,i.useState)([]);(0,i.useEffect)(()=>{let s=async()=>{if(e){Y(!0);try{let{data:s,error:r}=await l.O.from("vendors").select("*").eq("user_id",e.id).maybeSingle();if(r)throw r;if(q(s),s?.approved){let{data:e,error:r}=await l.O.from("listings").select("*").eq("vendor_id",s.id);if(r)throw r;t(e),A({totalListings:e.length,activeBookings:0,totalRevenue:0,pendingRequests:0})}else t([]);s?s.approved||"reviewing"!==s.status?s.approved?c.Am.success("Vendor approved! You can now create listings."):s.approved||"denied"!==s.status||c.Am.error("KYC denied. Contact support."):c.Am.info("KYC under review."):c.Am.info("Complete your KYC to create listings.")}catch(e){console.error("Error loading vendor dashboard:",e),c.Am.error("Error loading dashboard.")}finally{Y(!1)}}};s()},[e]);let R=async()=>{if(!e)return;Y(!0);let{data:s,error:t}=await (0,Z.lx)(e.id);t?(c.Am.error("Failed to load bookings"),console.error(t)):B(s||[]),Y(!1)};if((0,i.useEffect)(()=>{R()},[e]),_)return r.jsx(k.a,{requiredRole:"vendor",children:r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(N.T,{className:"h-6 w-6"})})});let{message:L,icon:O,variant:U}=(()=>{if(!y)return{message:"Complete your vendor profile",icon:x.Z,variant:"yellow"};if(!y.approved){if("reviewing"===y.status)return{message:"KYC under review",icon:x.Z,variant:"yellow"};if("denied"===y.status)return{message:"KYC denied",icon:x.Z,variant:"red"}}return{message:"Vendor approved",icon:m.Z,variant:"green"}})();return r.jsx(k.a,{requiredRole:"vendor",children:(0,r.jsxs)("div",{className:"container py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Vendor Dashboard"}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Welcome back, ",e?.user_metadata?.name||"Vendor"]})]}),(0,r.jsxs)(o.bZ,{className:"mb-6",variant:U,children:[r.jsx(O,{className:"w-5 h-5 mr-2"}),(0,r.jsxs)(o.X,{children:[L,!y&&(0,r.jsxs)("span",{children:[" ","—"," ",r.jsx(w(),{href:"/dashboard/vendor/kyc",className:"underline",children:"Start Verification"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(n.ll,{className:"text-sm font-medium",children:"Total Listings"}),r.jsx(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:P.totalListings}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Active services"})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(n.ll,{className:"text-sm font-medium",children:"Active Bookings"}),r.jsx(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:P.activeBookings}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Current bookings"})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(n.ll,{className:"text-sm font-medium",children:"Total Revenue"}),r.jsx(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["₦",P.totalRevenue.toLocaleString()]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(n.ll,{className:"text-sm font-medium",children:"Pending Requests"}),r.jsx(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:P.pendingRequests}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting response"})]})]})]}),(0,r.jsxs)(d.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,r.jsxs)(d.dr,{className:"grid w-full grid-cols-4",children:[r.jsx(d.SP,{value:"overview",children:"Overview"}),r.jsx(d.SP,{value:"listings",children:"Listings"}),r.jsx(d.SP,{value:"bookings",children:"Bookings"}),r.jsx(d.SP,{value:"profile",children:"Profile"})]}),r.jsx(d.nU,{value:"overview",className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[r.jsx(n.ll,{children:"Quick Actions"}),r.jsx(n.SZ,{children:"Manage your business efficiently"})]}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[r.jsx(C.z,{asChild:!0,className:"w-full justify-start",disabled:!y?.approved,children:(0,r.jsxs)(w(),{href:"/dashboard/vendor/listings/create",children:[r.jsx(f.Z,{className:"mr-2 h-4 w-4"}),"Create New Listing"]})}),r.jsx(C.z,{variant:"outline",asChild:!0,className:"w-full justify-start",children:(0,r.jsxs)(w(),{href:"/dashboard/vendor/bookings",children:[r.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"View Bookings"]})}),r.jsx(C.z,{variant:"outline",asChild:!0,className:"w-full justify-start",children:(0,r.jsxs)(w(),{href:"/dashboard/vendor/kyc",children:[r.jsx(g.Z,{className:"mr-2 h-4 w-4"}),y?"Update":"Complete"," KYC"]})})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[r.jsx(n.ll,{children:"Recent Activity"}),r.jsx(n.SZ,{children:"Latest updates on your account"})]}),r.jsx(n.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:"Account created"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Welcome to Bookhushly"})]})]}),y&&(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm",children:"KYC submitted"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Under review"})]})]})]})})]})]})}),(0,r.jsxs)(d.nU,{value:"listings",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"My Listings"}),r.jsx(C.z,{asChild:!0,disabled:!y?.approved,children:(0,r.jsxs)(w(),{href:"/dashboard/vendor/listings/create",children:[r.jsx(f.Z,{className:"mr-2 h-4 w-4"}),"Create Listing"]})})]}),0===s.length?r.jsx(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(h.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No listings yet"}),r.jsx("p",{className:"text-muted-foreground text-center mb-4",children:y?.approved?"Create your first listing to start accepting bookings":"Complete KYC verification to create listings"}),y?.approved&&r.jsx(C.z,{asChild:!0,children:r.jsx(w(),{href:"/dashboard/vendor/listings/create",children:"Create Your First Listing"})})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,r.jsxs)(n.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[r.jsx(n.ll,{className:"text-lg",children:e.title}),r.jsx(v.Z,{variant:e.active?"default":"secondary",children:e.active?"Active":"Inactive"})]}),r.jsx(n.SZ,{children:e.category})]}),(0,r.jsxs)(n.aY,{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-lg font-semibold",children:["₦",e.price?.toLocaleString()]}),r.jsx(C.z,{variant:"outline",size:"sm",asChild:!0,children:r.jsx(w(),{href:`/dashboard/vendor/listings/${e.id}`,children:"Edit"})})]})]})]},e.id))})]}),(0,r.jsxs)(d.nU,{value:"bookings",className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Booking Requests"}),_?r.jsx(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(u.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Loading bookings..."})]})}):0===S.length?r.jsx(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(u.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No bookings yet"}),r.jsx("p",{className:"text-muted-foreground text-center",children:"Booking requests will appear here once customers start booking your services"})]})}):r.jsx("div",{className:"space-y-4",children:S.map(e=>r.jsx(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-lg font-semibold",children:e.listings?.title}),(0,r.jsxs)("p",{className:"text-muted-foreground text-sm",children:[e.booking_date," at ",e.booking_time]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Guests: ",e.guests," • Total: ₦",e.total_amount]})]}),r.jsx(v.Z,{variant:"outline",className:"capitalize",children:e.status})]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Contact: ",e.contact_email," /"," ",e.contact_phone]})]})},e.id))})]}),(0,r.jsxs)(d.nU,{value:"profile",className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Vendor Profile"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[r.jsx(n.ll,{children:"Business Information"}),r.jsx(n.SZ,{children:y?"Update your business details":"Complete your vendor profile"})]}),r.jsx(n.aY,{children:y?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Business Name"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:y.business_name})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Status"}),r.jsx("div",{className:"flex items-center space-x-2 mt-1",children:r.jsx(v.Z,{variant:y.approved?"default":"secondary",children:y.approved?"Approved":"Pending Review"})})]}),r.jsx(C.z,{variant:"outline",asChild:!0,children:r.jsx(w(),{href:"/dashboard/vendor/kyc",children:"Update Profile"})})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(b.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Complete your KYC verification to start accepting bookings"}),r.jsx(C.z,{asChild:!0,children:r.jsx(w(),{href:"/dashboard/vendor/kyc",children:"Complete KYC"})})]})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[r.jsx(n.ll,{children:"Account Settings"}),r.jsx(n.SZ,{children:"Manage your account preferences"})]}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Email"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e?.email})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Name"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e?.user_metadata?.name})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Role"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Vendor"})]})]})]})]})]})]})]})})}},98047:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>d});var r=t(17536);let i=(0,r.createProxy)(String.raw`C:\Users\D\Downloads\Bookhushly.com-main\Bookhushly.com-main\app\dashboard\vendor\page.jsx`),{__esModule:a,$$typeof:l}=i,n=i.default,d=n}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4650,977,1823,1150,241,8351,234,5964,1704,3692,9767,999],()=>t(40139));module.exports=r})();