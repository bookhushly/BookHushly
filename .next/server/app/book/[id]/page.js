(()=>{var e={};e.id=6193,e.ids=[6193],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},37335:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>u,routeModule:()=>p,tree:()=>d});var r=t(73137),a=t(54647),i=t(4183),n=t.n(i),o=t(71775),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let c=r.AppPageRouteModule,d=["",{children:["book",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,68264)),"C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\book\\[id]\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,48818)),"C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\D\\Downloads\\Bookhushly.com-main\\Bookhushly.com-main\\app\\book\\[id]\\page.jsx"],m="/book/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new c({definition:{kind:a.x.APP_PAGE,page:"/book/[id]/page",pathname:"/book/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12987:(e,s,t)=>{Promise.resolve().then(t.bind(t,10047))},10047:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var r=t(60080),a=t(9885),i=t(57114),n=t(11440),o=t.n(n),l=t(99767),c=t(80850),d=t(95440),u=t(79803),m=t(43917),x=t(517),p=t(15441),h=t(91672),g=t(96253),f=t(87094),j=t(78260),y=t(49268),b=t(23161),v=t(9941),_=t(97052),N=t(81704),w=t(9234),k=t(12820),q=t(88042),P=t(68384),S=t(51910),Z=t(11922),B=t(28070);function D({className:e,classNames:s,showOutsideDays:t=!0,...a}){return r.jsx(B._W,{showOutsideDays:t,className:(0,b.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,b.cn)((0,P.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,b.cn)((0,P.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...e})=>r.jsx(S.Z,{className:"h-4 w-4"}),IconRight:({...e})=>r.jsx(Z.Z,{className:"h-4 w-4"})},...a})}D.displayName="Calendar";var C=t(49424),A=t(76466),I=t(84827);function F(){let e=(0,i.useParams)(),s=(0,i.useRouter)(),{user:t}=(0,c.tN)(),{addBooking:n}=(0,c.ML)(),[S,Z]=(0,a.useState)(!1),[B,F]=(0,a.useState)(),[O,T]=(0,a.useState)({guests:1,time:"",duration:"",special_requests:"",contact_phone:"",contact_email:t?.email||""}),[L,R]=(0,a.useState)(""),G={id:e.id,title:"Luxury Hotel Suite - Premium Accommodation",category:"hotels",price:75e3,location:"Victoria Island, Lagos",capacity:4,vendor:{business_name:"Grand Lagos Hotels",name:"Adebayo Johnson"}},M=e=>{T(s=>({...s,[e.target.name]:e.target.value})),L&&R("")},z=()=>B?O.time?O.contact_phone?!(O.guests>G.capacity)||(R(`Maximum capacity is ${G.capacity} guests`),!1):(R("Phone number is required"),!1):(R("Please select a time"),!1):(R("Please select a date"),!1),E=()=>{let e=G.price;return e+.05*e},U=async e=>{if(e.preventDefault(),z()){Z(!0),R("");try{let e={listing_id:G.id,customer_id:t.id,booking_date:B.toISOString().split("T")[0],booking_time:O.time,guests:parseInt(O.guests),duration:O.duration||null,special_requests:O.special_requests||null,contact_phone:O.contact_phone,contact_email:O.contact_email,total_amount:E(),status:"pending",payment_status:"pending",created_at:new Date().toISOString()},{data:r,error:a}=await (0,d.TB)(e);if(a){R(a.message),v.Am.error("Booking failed",{description:a.message});return}n(r),v.Am.success("Booking request submitted!",{description:"The vendor will review and confirm your booking shortly"}),s.push("/dashboard/customer?tab=bookings")}catch(e){R("An unexpected error occurred"),v.Am.error("Booking failed",{description:"An unexpected error occurred"})}finally{Z(!1)}}};return r.jsx(l.a,{requiredRole:"customer",children:(0,r.jsxs)("div",{className:"container max-w-4xl py-8",children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)(o(),{href:`/services/${e.id}`,className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Service Details"]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:(0,r.jsxs)(_.Zb,{children:[(0,r.jsxs)(_.Ol,{children:[r.jsx(_.ll,{children:"Book This Service"}),r.jsx(_.SZ,{children:"Fill in the details below to request a booking"})]}),r.jsx(_.aY,{children:(0,r.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[L&&(0,r.jsxs)(N.bZ,{variant:"destructive",children:[r.jsx(m.Z,{className:"h-4 w-4"}),r.jsx(N.X,{children:L})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(w._,{children:"Select Date *"}),(0,r.jsxs)(k.J2,{children:[r.jsx(q.xo,{asChild:!0,children:(0,r.jsxs)(P.z,{variant:"outline",className:(0,b.cn)("w-full justify-start text-left font-normal",!B&&"text-muted-foreground"),children:[r.jsx(x.Z,{className:"mr-2 h-4 w-4"}),B?(0,y.ZP)(B,"PPP"):"Pick a date"]})}),r.jsx(k.yk,{className:"w-auto p-0",children:r.jsx(D,{mode:"single",selected:B,onSelect:F,disabled:e=>e<new Date,initialFocus:!0})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(w._,{htmlFor:"time",children:"Preferred Time *"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(p.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(C.I,{id:"time",name:"time",type:"time",value:O.time,onChange:M,className:"pl-10",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(w._,{htmlFor:"duration",children:"Duration (Optional)"}),r.jsx(C.I,{id:"duration",name:"duration",placeholder:"e.g., 2 hours, 1 day",value:O.duration,onChange:M})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(w._,{htmlFor:"guests",children:"Number of Guests *"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(h.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(C.I,{id:"guests",name:"guests",type:"number",min:"1",max:G.capacity,value:O.guests,onChange:M,className:"pl-10",required:!0})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Maximum capacity: ",G.capacity," guests"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(w._,{htmlFor:"contact_phone",children:"Phone Number *"}),r.jsx(C.I,{id:"contact_phone",name:"contact_phone",type:"tel",value:O.contact_phone,onChange:M,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(w._,{htmlFor:"contact_email",children:"Email Address"}),r.jsx(C.I,{id:"contact_email",name:"contact_email",type:"email",value:O.contact_email,onChange:M})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(w._,{htmlFor:"special_requests",children:"Special Requests (Optional)"}),r.jsx(A.g,{id:"special_requests",name:"special_requests",value:O.special_requests,onChange:M,rows:3})]}),r.jsx(P.z,{type:"submit",className:"w-full",size:"lg",disabled:S,children:S?(0,r.jsxs)(r.Fragment,{children:[r.jsx(I.T,{className:"mr-2 h-4 w-4"}),"Processing Booking..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(g.Z,{className:"mr-2 h-4 w-4"}),"Submit Booking Request"]})})]})})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(_.Zb,{children:[r.jsx(_.Ol,{children:r.jsx(_.ll,{className:"text-lg",children:"Booking Summary"})}),(0,r.jsxs)(_.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium",children:G.title}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["by ",G.vendor.business_name]})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[r.jsx(f.Z,{className:"h-4 w-4 mr-1"}),G.location]}),B&&(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:(0,y.ZP)(B,"PPP")})]}),O.time&&(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),r.jsx("span",{children:O.time})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{children:[O.guests," guest",O.guests>1?"s":""]})]})]})]})]}),(0,r.jsxs)(_.Zb,{children:[r.jsx(_.Ol,{children:(0,r.jsxs)(_.ll,{className:"text-lg flex items-center",children:[r.jsx(j.Z,{className:"h-5 w-5 mr-2"}),"Price Details"]})}),(0,r.jsxs)(_.aY,{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Service fee"}),(0,r.jsxs)("span",{children:["₦",G.price.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Platform fee (5%)"}),(0,r.jsxs)("span",{children:["₦",(.05*G.price).toLocaleString()]})]}),r.jsx("div",{className:"border-t pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[r.jsx("span",{children:"Total"}),(0,r.jsxs)("span",{children:["₦",E().toLocaleString()]})]})}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Payment will be processed after vendor confirmation"})]})]}),(0,r.jsxs)(_.Zb,{children:[r.jsx(_.Ol,{children:r.jsx(_.ll,{className:"text-lg",children:"Booking Policy"})}),(0,r.jsxs)(_.aY,{className:"space-y-2 text-sm text-muted-foreground",children:[r.jsx("p",{children:"• Booking requests are subject to vendor approval"}),r.jsx("p",{children:"• Payment is processed only after confirmation"}),r.jsx("p",{children:"• Free cancellation up to 24 hours before service"}),r.jsx("p",{children:"• Refund policy applies as per vendor terms"})]})]})]})]})]})})}},49424:(e,s,t)=>{"use strict";t.d(s,{I:()=>n});var r=t(60080),a=t(9885),i=t(23161);let n=a.forwardRef(({className:e,type:s,...t},a)=>r.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));n.displayName="Input"},84827:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var r=t(60080),a=t(23161);function i({className:e,...s}){return r.jsx("div",{className:(0,a.cn)("inline-block animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] text-primary motion-reduce:animate-[spin_1.5s_linear_infinite]",e),role:"status",...s,children:r.jsx("span",{className:"sr-only",children:"Loading..."})})}},76466:(e,s,t)=>{"use strict";t.d(s,{g:()=>n});var r=t(60080),a=t(9885),i=t(23161);let n=a.forwardRef(({className:e,...s},t)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));n.displayName="Textarea"},68264:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,generateStaticParams:()=>c});var r=t(48144),a=t(17536);let i=(0,a.createProxy)(String.raw`C:\Users\D\Downloads\Bookhushly.com-main\Bookhushly.com-main\components\book\BookServiceClient.jsx`),{__esModule:n,$$typeof:o}=i,l=i.default;async function c(){let e=Array.from({length:20},(e,s)=>({id:(s+1).toString()}));return e}function d(){return r.jsx(l,{})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4414,8966,5964,1704,9767,5440],()=>t(37335));module.exports=r})();